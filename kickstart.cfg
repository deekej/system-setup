# Generated by Anaconda 40.22.3
# Generated by pykickstart v3.52
#version=DEVEL
# Use graphical install
graphical

%post --erroronfail
cp /etc/skel/.bash* /root
%end

# Keyboard layouts
keyboard --vckeymap=cz --xlayouts='cz' --switch='grp:win_space_toggle'
# System language
lang en_US.UTF-8

# Firewall configuration
firewall --use-system-defaults

# OSTree setup
ostreesetup --osname="fedora" --remote="fedora" --url="file:///ostree/repo" --ref="fedora/40/x86_64/silverblue" --nogpg

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.9.1
ignoredisk --only-use=nvme0n1
# Partition clearing information
clearpart --none --initlabel
# Disk partitioning information
part /boot --fstype="xfs" --ondisk=nvme0n1 --size=3072
part /boot/efi --fstype="efi" --ondisk=nvme0n1 --size=1024 --fsoptions="umask=0077,shortname=winnt"
part biosboot --fstype="biosboot" --ondisk=nvme0n1 --size=1
part btrfs.1619 --fstype="btrfs" --ondisk=nvme0n1 --size=972661 --encrypted --luks-version=luks2
btrfs none --label=fedora --data=single btrfs.1619
btrfs / --subvol --name=@ LABEL=fedora
btrfs /var --subvol --name=var LABEL=fedora
btrfs /var/containers --subvol --name=var.containers LABEL=fedora
btrfs /var/home --subvol --name=var.home LABEL=fedora
btrfs /var/log --subvol --name=var.log LABEL=fedora

timesource --ntp-pool=time.cloudflare.com --nts
# System timezone
timezone Europe/Prague --utc

#Root password
rootpw --lock
